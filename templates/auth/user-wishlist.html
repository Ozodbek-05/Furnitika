{% extends 'layout/base.html' %}
{% load static %}
{% load i18n %}
{% load my_tags %}
{% block title %}Wish List{% endblock %}
{% block body_class %}user-wishlist blog{% endblock %}
{% block content %}
    <div class="main-content">
        <div class="wrap-banner">
            <!-- breadcrumb -->
            <nav class="breadcrumb-bg">
                <div class="container no-index">
                    <div class="breadcrumb">
                        <ol>
                            <li>
                                <a href="{% url 'products:home' %}">
                                    <span>{% trans 'Home' %}</span>
                                </a>
                            </li>
                            <li>
                                <a href="{% url 'wishlist:list' %}">
                                    <span>{% trans 'Wishlists' %}</span>
                                </a>
                            </li>
                        </ol>
                    </div>
                </div>
            </nav>
        </div>

        <!-- main -->
        <div id="wrapper-site">
            <div class="container">
                <div class="row">
                    <div id="content-wrapper" class="col-xs-12 col-sm-12 col-md-12 col-lg-12 onecol">
                        <div id="main">
                            <div id="content" class="page-content">
                                <div id="mywishlist">
                                    <h1 class="title-page">{% trans 'My Wishlists' %}</h1>
                                    <div id="block-history" class="block-center">
                                        {% if items %}
                                        <table class="std table table-striped">
                                            <thead>
                                                <tr>
                                                    <th class="first_item text-center align-middle">Image</th>
                                                    <th class="item text-center align-middle">Product Name</th>
                                                    <th class="item mywishlist_first text-center align-middle">Price</th>
                                                    <th class="item mywishlist_second text-center align-middle">Added Date</th>
                                                    <th class="item mywishlist_second text-center align-middle" colspan="2">Actions</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {% for item in items %}
                                                <tr id="wishlist_{{ item.id }}">
                                                    <td class="text-center align-middle">
                                                        <a href="{% url 'products:detail' item.product.id %}">
                                                            {% if item.product.images.first %}
                                                            <img src="{{ item.product.images.first.image.url }}" alt="{{ item.product.title }}" style="width: 80px; height: 80px; object-fit: cover; border-radius: 5px;">
                                                            {% else %}
                                                            <img src="{% static 'img/product/default.jpg' %}" alt="{{ item.product.title }}" style="width: 80px; height: 80px; object-fit: cover; border-radius: 5px;">
                                                            {% endif %}
                                                        </a>
                                                    </td>
                                                    <td class="text-center align-middle">
                                                        <a href="{% url 'products:detail' item.product.id %}" style="font-weight: 500; color: #333;">
                                                            {{ item.product.title }}
                                                        </a>
                                                    </td>
                                                    <td class="text-center align-middle" style="font-weight: 600; color: #e74c3c;">Â£{{ item.product.price }}</td>
                                                    <td class="text-center align-middle">{{ item.created_at|date:"Y-m-d" }}</td>
                                                    <td class="text-center align-middle">
                                                        <a href="{% url 'products:detail' item.product.id %}" class="btn btn-primary">
                                                            <i class="fa fa-eye" aria-hidden="true"></i>
                                                            View
                                                        </a>
                                                    </td>
                                                   <td class="wishlist_delete text-center align-middle">
                                                        <form action="{% url 'wishlist:wishlist_remove' item.product.id %}" method="post" style="display: inline;">
                                                            {% csrf_token %}
                                                            <button type="submit" class="btn btn-danger" style="padding: 6px 12px; font-size: 14px; min-width: 80px;" onclick="return confirm('Do you really want to remove this item from wishlist?');">
                                                                <i class="fa fa-trash" aria-hidden="true"></i>
                                                                Delete
                                                            </button>
                                                        </form>
                                                    </td>
                                                </tr>
                                                {% endfor %}
                                            </tbody>
                                        </table>
                                        {% else %}
                                        <div class="alert alert-info text-center">
                                            <p>Your wishlist is empty. Start adding products you love!</p>
                                            <a href="{% url 'products:home' %}" class="btn btn-primary">
                                                <i class="fa fa-shopping-bag" aria-hidden="true"></i>
                                                Continue Shopping
                                            </a>
                                        </div>
                                        {% endif %}
                                    </div>
                                    <div class="page-home">
                                        <a class="btn btn-default" href="{% url 'pages:home' %}">
                                            <i class="fa fa-home" aria-hidden="true"></i>
                                            <span>{% trans 'Homepage' %}</span>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}